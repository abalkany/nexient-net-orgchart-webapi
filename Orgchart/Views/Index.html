<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Manage Job Titles</title>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
    <script>
        var uri = '/api/JobTitle/';

        function DeleteClicked(id) {
            $("body").css("cursor", "wait");
            $.ajax({
                url: uri + id,
                type: 'DELETE',
                success: function(result) {
                    ShowJobTitles();
                }
            });
        }

        function EditClicked(id) {
            alert("edit clicked.");
            $("body").css("cursor", "wait");
            $.ajax({
                url: uri + id,
                type: 'PUT',
                success: function (result) {
                    ShowJobTitles();
                }
            });
        }

        function CreateJobTitleClicked() {
            //alert("Create clicked.");
            window.location = "/Views/Create.html";
        }

        function ShowJobTitles() {
            $.getJSON(uri)
                .done(function(jobTitles) {
                    $("#JobTitleTable").find("tr:gt(0)").remove();
                    $.each(jobTitles, function(key, item) {
                            $("#JobTitleTable").append("<tr><td>" + item.Description + "</td><td>" + item.JobTitleId + "</td>" +
                                "<td><a onclick=EditClicked(" + item.JobTitleId + ")>Edit</a></td>" +
                                "<td><a onclick=DeleteClicked(" + item.JobTitleId + ")>Delete</a></td></tr>");
                        })
                        .fail(function() {
                            alert("error");
                        });
                });
            $("body").css("cursor", "default");
        }

        $(document).ready(function() {
            ShowJobTitles();
        });
    </script>

</head>
<body>
    <h2>Job Titles</h2>

    <table id="JobTitleTable">
        <tr><th>Job Title</th><th>Job Title ID</th></tr>
    </table>
    <br />
<!--<a href="/api/JobTitle/1/2">Create New Job Title</a>-->
    <input type="button" value="Create New Job Title" onclick="CreateJobTitleClicked()"/>
</body>
</html>
